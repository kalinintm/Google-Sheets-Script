const countries = [
"Azerbaijan","Armenia","Belarus","Bulgaria","Croatia","Estonia","Finland","France","Georgia", 
  "Germany","Greece","Indonesia","Israel","Italy","Kazakhstan","Kyrgyzstan","Latvia","Lithuania", 
  "Moldova","Monaco","Mongolia","Montenegro","Netherlands","Norway","Poland","Romania",
  "Russian Federation","Serbia","Slovakia","Slovenia","South Georgia and the South Sandwich Islands","Spain","Sri Lanka",
  "Tajikistan","Turkey","Thailand","Turkmenistan","Uzbekistan","Viet Nam"
];

function wait(ms) {
  return new Promise(res => setTimeout(res, ms));
}

async function openSelector() {
  const trigger = document.querySelector('.ant-select-selector');
  if (trigger && !document.querySelector('.rc-select-dropdown:not([aria-hidden="true"])')) {
    trigger.click();
    await wait(200);
  }
}

async function selectCountry(country) {
  await openSelector();

  const holder = document.querySelector('.rc-select-dropdown:not([aria-hidden="true"]) .rc-virtual-list-holder');
  if (!holder) {
    console.warn(`Dropdown не найден для "${country}"`);
    return;
  }

  let found = false;
  for (let i = 0; i < 40; i++) {
    const option = holder.querySelector(`.rc-select-item-option div.truncate[title="${country}"]`);
    if (option) {
      option.closest('.rc-select-item-option').click();
      console.log(`✅ Выбрана: ${country}`);
      found = true;
      break;
    }
    // Умеренный шаг прокрутки
    holder.scrollBy(0, 170);
    await wait(100);
  }

  if (!found) {
    console.warn(`❌ Не удалось найти: ${country}`);
  }

  await wait(250);
}

(async () => {
  for (const country of countries) {
    await selectCountry(country);
  }
})();
